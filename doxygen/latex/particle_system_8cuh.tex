\hypertarget{particle_system_8cuh}{\section{Dokumentacja pliku particle\-System.\-cuh}
\label{particle_system_8cuh}\index{particle\-System.\-cuh@{particle\-System.\-cuh}}
}


Same deklaracje funkcji.  


Ten wykres pokazuje, które pliki bezpośrednio lub pośrednio załączają ten plik\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=181pt]{particle_system_8cuh__dep__incl}
\end{center}
\end{figure}
\subsection*{Funkcje}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{particle_system_8cuh_ad205012a960928f6fb61ea4f51a95e9f}{cuda\-Init} (int argc, char $\ast$$\ast$argv)
\item 
void \hyperlink{particle_system_8cuh_aee51e01a5233e0fda578bd5b3bc38e8f}{allocate\-Array} (void $\ast$$\ast$dev\-Ptr, int size)
\item 
void \hyperlink{particle_system_8cuh_a2946519c8d9c4f8ebf552bf044821ea9}{free\-Array} (void $\ast$dev\-Ptr)
\item 
void \hyperlink{particle_system_8cuh_af59f4c114812beed29874c0a1a31519d}{thread\-Sync} ()
\item 
void \hyperlink{particle_system_8cuh_a54716407dbd516db34f42b2faf7f91a3}{copy\-Array\-From\-Device} (void $\ast$host, const void $\ast$device, struct cuda\-Graphics\-Resource $\ast$$\ast$cuda\-\_\-vbo\-\_\-resource, int size)
\item 
void \hyperlink{particle_system_8cuh_ac4d4ecd921dbed6c2deef639ca295374}{copy\-Array\-To\-Device} (void $\ast$device, const void $\ast$host, int offset, int size)
\item 
void \hyperlink{particle_system_8cuh_a4386a84282ceeaba09939817aa2a9c24}{register\-G\-L\-Buffer\-Object} (\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} vbo, struct cuda\-Graphics\-Resource $\ast$$\ast$cuda\-\_\-vbo\-\_\-resource)
\item 
void \hyperlink{particle_system_8cuh_a9afef8c00ca779aae2d7484b45bce34c}{unregister\-G\-L\-Buffer\-Object} (struct cuda\-Graphics\-Resource $\ast$cuda\-\_\-vbo\-\_\-resource)
\item 
void $\ast$ \hyperlink{particle_system_8cuh_aa491077afd740a269815eb9ce81c8642}{map\-G\-L\-Buffer\-Object} (struct cuda\-Graphics\-Resource $\ast$$\ast$cuda\-\_\-vbo\-\_\-resource)
\item 
void \hyperlink{particle_system_8cuh_a98c3325419b7528d34a51ca7972d7095}{unmap\-G\-L\-Buffer\-Object} (struct cuda\-Graphics\-Resource $\ast$cuda\-\_\-vbo\-\_\-resource)
\item 
void \hyperlink{particle_system_8cuh_a342176dbaba2668312c45e1a1423fc4e}{set\-Parameters} (\hyperlink{struct_sim_params}{Sim\-Params} $\ast$host\-Params)
\item 
void \hyperlink{particle_system_8cuh_a34e9db8b801cd537e5ae5a4a886e020c}{integrate\-System} (float $\ast$pos, float $\ast$vel, float delta\-Time, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{num\-Particles})
\item 
void \hyperlink{particle_system_8cuh_ae0a4037d25e768622443077546399cf2}{calc\-Hash} (\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$grid\-Particle\-Hash, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$grid\-Particle\-Index, float $\ast$pos, int \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{num\-Particles})
\item 
void \hyperlink{particle_system_8cuh_ac72ccd068434c46c2f901c751d53be1d}{reorder\-Data\-And\-Find\-Cell\-Start} (\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$cell\-Start, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$cell\-End, float $\ast$sorted\-Pos, float $\ast$sorted\-Vel, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$grid\-Particle\-Hash, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$grid\-Particle\-Index, float $\ast$old\-Pos, float $\ast$old\-Vel, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{num\-Particles}, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} num\-Cells)
\item 
void \hyperlink{particle_system_8cuh_ad9d704d76ddff93e75ca7d39f57bbced}{collide} (float $\ast$new\-Vel, float $\ast$sorted\-Pos, float $\ast$sorted\-Vel, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$grid\-Particle\-Index, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$cell\-Start, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$cell\-End, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{num\-Particles}, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} num\-Cells, float delta\-Time)
\item 
void \hyperlink{particle_system_8cuh_ac71da7e4672a2732a098ba933a799257}{sort\-Particles} (\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$d\-Grid\-Particle\-Hash, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} $\ast$d\-Grid\-Particle\-Index, \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{num\-Particles})
\end{DoxyCompactItemize}


\subsection{Opis szczegółowy}
Same deklaracje funkcji. 

Definicja w pliku \hyperlink{particle_system_8cuh_source}{particle\-System.\-cuh}.



\subsection{Dokumentacja funkcji}
\hypertarget{particle_system_8cuh_aee51e01a5233e0fda578bd5b3bc38e8f}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!allocate\-Array@{allocate\-Array}}
\index{allocate\-Array@{allocate\-Array}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{allocate\-Array}]{\setlength{\rightskip}{0pt plus 5cm}void allocate\-Array (
\begin{DoxyParamCaption}
\item[{void $\ast$$\ast$}]{dev\-Ptr, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_aee51e01a5233e0fda578bd5b3bc38e8f}


Odwołania w \hyperlink{particle_system_8cpp_source_l00142}{Particle\-System\-::\-\_\-initialize()}.



Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_aee51e01a5233e0fda578bd5b3bc38e8f_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_ae0a4037d25e768622443077546399cf2}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!calc\-Hash@{calc\-Hash}}
\index{calc\-Hash@{calc\-Hash}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{calc\-Hash}]{\setlength{\rightskip}{0pt plus 5cm}void calc\-Hash (
\begin{DoxyParamCaption}
\item[{{\bf uint} $\ast$}]{grid\-Particle\-Hash, }
\item[{{\bf uint} $\ast$}]{grid\-Particle\-Index, }
\item[{float $\ast$}]{pos, }
\item[{int}]{num\-Particles}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ae0a4037d25e768622443077546399cf2}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00163}{163} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00167     \{
00168         \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} numThreads, numBlocks;
00169         \hyperlink{particle_system__cuda_8cu_a78e8aa50e0629b57cff219a2fa753ed0}{computeGridSize}(\hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}, 256, numBlocks, numThreads);
00170 
00172 \textcolor{comment}{/*      wywolanie watkow        */}
00174         \textcolor{comment}{// execute the kernel}
00175         calcHashD<<< numBlocks, numThreads >>>(gridParticleHash,
00176                                                gridParticleIndex,
00177                                                (float4 *) pos,
00178                                                \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles});
00179 
00180         \textcolor{comment}{// check if kernel invocation generated an error}
00181         getLastCudaError(\textcolor{stringliteral}{"Kernel execution failed"});
00182     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_ae0a4037d25e768622443077546399cf2_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_ad9d704d76ddff93e75ca7d39f57bbced}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!collide@{collide}}
\index{collide@{collide}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{collide}]{\setlength{\rightskip}{0pt plus 5cm}void collide (
\begin{DoxyParamCaption}
\item[{float $\ast$}]{new\-Vel, }
\item[{float $\ast$}]{sorted\-Pos, }
\item[{float $\ast$}]{sorted\-Vel, }
\item[{{\bf uint} $\ast$}]{grid\-Particle\-Index, }
\item[{{\bf uint} $\ast$}]{cell\-Start, }
\item[{{\bf uint} $\ast$}]{cell\-End, }
\item[{{\bf uint}}]{num\-Particles, }
\item[{{\bf uint}}]{num\-Cells, }
\item[{float}]{delta\-Time}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ad9d704d76ddff93e75ca7d39f57bbced}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00225}{225} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00234     \{
00235 \textcolor{preprocessor}{#if USE\_TEX}
00236 \textcolor{preprocessor}{}        checkCudaErrors(cudaBindTexture(0, oldPosTex, sortedPos, \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}*\textcolor{keyword}{sizeof}(float4)));
00237         checkCudaErrors(cudaBindTexture(0, oldVelTex, sortedVel, \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}*\textcolor{keyword}{sizeof}(float4)));
00238         checkCudaErrors(cudaBindTexture(0, cellStartTex, cellStart, numCells*\textcolor{keyword}{sizeof}(
      \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint})));
00239         checkCudaErrors(cudaBindTexture(0, cellEndTex, cellEnd, numCells*\textcolor{keyword}{sizeof}(
      \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint})));
00240 \textcolor{preprocessor}{#endif}
00241 \textcolor{preprocessor}{}
00242         \textcolor{comment}{// thread per particle}
00243         \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} numThreads, numBlocks;
00244         \hyperlink{particle_system__cuda_8cu_a78e8aa50e0629b57cff219a2fa753ed0}{computeGridSize}(\hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}, 64, numBlocks, numThreads);
00245 
00247 \textcolor{comment}{/*      wywolanie watkow zderzen        */}
00249         \textcolor{comment}{// execute the kernel}
00250         collideD<<< numBlocks, numThreads >>>((float4 *)newVel,
00251                                               (float4 *)sortedPos,
00252                                               (float4 *)sortedVel,
00253                                               gridParticleIndex,
00254                                               cellStart,
00255                                               cellEnd,
00256                                               \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles},
00257                                                                                           deltaTime);
00258 
00259         \textcolor{comment}{// check if kernel invocation generated an error}
00260         getLastCudaError("Kernel execution failed");
00261 
00262 \textcolor{preprocessor}{#if USE\_TEX}
00263 \textcolor{preprocessor}{}        checkCudaErrors(cudaUnbindTexture(oldPosTex));
00264         checkCudaErrors(cudaUnbindTexture(oldVelTex));
00265         checkCudaErrors(cudaUnbindTexture(cellStartTex));
00266         checkCudaErrors(cudaUnbindTexture(cellEndTex));
00267 \textcolor{preprocessor}{#endif}
00268 \textcolor{preprocessor}{}    \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_ad9d704d76ddff93e75ca7d39f57bbced_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a54716407dbd516db34f42b2faf7f91a3}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!copy\-Array\-From\-Device@{copy\-Array\-From\-Device}}
\index{copy\-Array\-From\-Device@{copy\-Array\-From\-Device}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{copy\-Array\-From\-Device}]{\setlength{\rightskip}{0pt plus 5cm}void copy\-Array\-From\-Device (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{host, }
\item[{const void $\ast$}]{device, }
\item[{struct cuda\-Graphics\-Resource $\ast$$\ast$}]{cuda\-\_\-vbo\-\_\-resource, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a54716407dbd516db34f42b2faf7f91a3}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00114}{114} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00335}{Particle\-System\-::dump\-Grid()}, \hyperlink{particle_system_8cpp_source_l00360}{Particle\-System\-::dump\-Particles()}, \hyperlink{particle_system_8cpp_source_l00375}{Particle\-System\-::get\-Array()} i \hyperlink{particles_8cpp_source_l00306}{run\-Benchmark()}.


\begin{DoxyCode}
00116     \{
00117         \textcolor{keywordflow}{if} (cuda\_vbo\_resource)
00118         \{
00119             device = \hyperlink{particle_system__cuda_8cu_aa491077afd740a269815eb9ce81c8642}{mapGLBufferObject}(cuda\_vbo\_resource);
00120         \}
00121 
00122         checkCudaErrors(cudaMemcpy(host, device, size, cudaMemcpyDeviceToHost));
00123 
00124         \textcolor{keywordflow}{if} (cuda\_vbo\_resource)
00125         \{
00126             \hyperlink{particle_system__cuda_8cu_a98c3325419b7528d34a51ca7972d7095}{unmapGLBufferObject}(*cuda\_vbo\_resource);
00127         \}
00128     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a54716407dbd516db34f42b2faf7f91a3_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_ac4d4ecd921dbed6c2deef639ca295374}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!copy\-Array\-To\-Device@{copy\-Array\-To\-Device}}
\index{copy\-Array\-To\-Device@{copy\-Array\-To\-Device}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{copy\-Array\-To\-Device}]{\setlength{\rightskip}{0pt plus 5cm}void copy\-Array\-To\-Device (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{device, }
\item[{const void $\ast$}]{host, }
\item[{int}]{offset, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ac4d4ecd921dbed6c2deef639ca295374}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00083}{83} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00403}{Particle\-System\-::set\-Array()}.


\begin{DoxyCode}
00084     \{
00085         checkCudaErrors(cudaMemcpy((\textcolor{keywordtype}{char} *) device + offset, host, size, cudaMemcpyHostToDevice));
00086     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_ac4d4ecd921dbed6c2deef639ca295374_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_ad205012a960928f6fb61ea4f51a95e9f}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!cuda\-Init@{cuda\-Init}}
\index{cuda\-Init@{cuda\-Init}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{cuda\-Init}]{\setlength{\rightskip}{0pt plus 5cm}void cuda\-Init (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ad205012a960928f6fb61ea4f51a95e9f}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00048}{48} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particles_8cpp_source_l00938}{main()}.


\begin{DoxyCode}
00049     \{
00050         \textcolor{keywordtype}{int} devID;
00051 
00052         \textcolor{comment}{// use command-line specified CUDA device, otherwise use device with highest Gflops/s}
00053         devID = findCudaDevice(argc, (\textcolor{keyword}{const} \textcolor{keywordtype}{char} **)argv);
00054 
00055         \textcolor{keywordflow}{if} (devID < 0)
00056         \{
00057             printf(\textcolor{stringliteral}{"No CUDA Capable devices found, exiting...\(\backslash\)n"});
00058             exit(EXIT\_SUCCESS);
00059         \}
00060     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{particle_system_8cuh_ad205012a960928f6fb61ea4f51a95e9f_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a2946519c8d9c4f8ebf552bf044821ea9}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!free\-Array@{free\-Array}}
\index{free\-Array@{free\-Array}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{free\-Array}]{\setlength{\rightskip}{0pt plus 5cm}void free\-Array (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{dev\-Ptr}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a2946519c8d9c4f8ebf552bf044821ea9}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00073}{73} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00233}{Particle\-System\-::\-\_\-finalize()}.


\begin{DoxyCode}
00074     \{
00075         checkCudaErrors(cudaFree(devPtr));
00076     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a2946519c8d9c4f8ebf552bf044821ea9_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a34e9db8b801cd537e5ae5a4a886e020c}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!integrate\-System@{integrate\-System}}
\index{integrate\-System@{integrate\-System}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{integrate\-System}]{\setlength{\rightskip}{0pt plus 5cm}void integrate\-System (
\begin{DoxyParamCaption}
\item[{float $\ast$}]{pos, }
\item[{float $\ast$}]{vel, }
\item[{float}]{delta\-Time, }
\item[{{\bf uint}}]{num\-Particles}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a34e9db8b801cd537e5ae5a4a886e020c}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00149}{149} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00153     \{
00154         thrust::device\_ptr<float4> d\_pos4((float4 *)pos);
00155         thrust::device\_ptr<float4> d\_vel4((float4 *)vel);
00156 
00157         thrust::for\_each(
00158             thrust::make\_zip\_iterator(thrust::make\_tuple(d\_pos4, d\_vel4)),
00159             thrust::make\_zip\_iterator(thrust::make\_tuple(d\_pos4+\hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}, d\_vel4+
      \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles})),
00160             \hyperlink{structintegrate__functor}{integrate\_functor}(deltaTime));
00161     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a34e9db8b801cd537e5ae5a4a886e020c_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_aa491077afd740a269815eb9ce81c8642}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!map\-G\-L\-Buffer\-Object@{map\-G\-L\-Buffer\-Object}}
\index{map\-G\-L\-Buffer\-Object@{map\-G\-L\-Buffer\-Object}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{map\-G\-L\-Buffer\-Object}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ map\-G\-L\-Buffer\-Object (
\begin{DoxyParamCaption}
\item[{struct cuda\-Graphics\-Resource $\ast$$\ast$}]{cuda\-\_\-vbo\-\_\-resource}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_aa491077afd740a269815eb9ce81c8642}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00099}{99} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00100     \{
00101         \textcolor{keywordtype}{void} *ptr;
00102         checkCudaErrors(cudaGraphicsMapResources(1, cuda\_vbo\_resource, 0));
00103         \textcolor{keywordtype}{size\_t} num\_bytes;
00104         checkCudaErrors(cudaGraphicsResourceGetMappedPointer((\textcolor{keywordtype}{void} **)&ptr, &num\_bytes,
00105                                                              *cuda\_vbo\_resource));
00106         \textcolor{keywordflow}{return} ptr;
00107     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_aa491077afd740a269815eb9ce81c8642_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a4386a84282ceeaba09939817aa2a9c24}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!register\-G\-L\-Buffer\-Object@{register\-G\-L\-Buffer\-Object}}
\index{register\-G\-L\-Buffer\-Object@{register\-G\-L\-Buffer\-Object}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{register\-G\-L\-Buffer\-Object}]{\setlength{\rightskip}{0pt plus 5cm}void register\-G\-L\-Buffer\-Object (
\begin{DoxyParamCaption}
\item[{{\bf uint}}]{vbo, }
\item[{struct cuda\-Graphics\-Resource $\ast$$\ast$}]{cuda\-\_\-vbo\-\_\-resource}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a4386a84282ceeaba09939817aa2a9c24}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00088}{88} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00142}{Particle\-System\-::\-\_\-initialize()} i \hyperlink{particle_system_8cpp_source_l00403}{Particle\-System\-::set\-Array()}.


\begin{DoxyCode}
00089     \{
00090         checkCudaErrors(cudaGraphicsGLRegisterBuffer(cuda\_vbo\_resource, vbo,
00091                                                      cudaGraphicsMapFlagsNone));
00092     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a4386a84282ceeaba09939817aa2a9c24_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_ac72ccd068434c46c2f901c751d53be1d}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!reorder\-Data\-And\-Find\-Cell\-Start@{reorder\-Data\-And\-Find\-Cell\-Start}}
\index{reorder\-Data\-And\-Find\-Cell\-Start@{reorder\-Data\-And\-Find\-Cell\-Start}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{reorder\-Data\-And\-Find\-Cell\-Start}]{\setlength{\rightskip}{0pt plus 5cm}void reorder\-Data\-And\-Find\-Cell\-Start (
\begin{DoxyParamCaption}
\item[{{\bf uint} $\ast$}]{cell\-Start, }
\item[{{\bf uint} $\ast$}]{cell\-End, }
\item[{float $\ast$}]{sorted\-Pos, }
\item[{float $\ast$}]{sorted\-Vel, }
\item[{{\bf uint} $\ast$}]{grid\-Particle\-Hash, }
\item[{{\bf uint} $\ast$}]{grid\-Particle\-Index, }
\item[{float $\ast$}]{old\-Pos, }
\item[{float $\ast$}]{old\-Vel, }
\item[{{\bf uint}}]{num\-Particles, }
\item[{{\bf uint}}]{num\-Cells}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ac72ccd068434c46c2f901c751d53be1d}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00184}{184} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00194     \{
00195         \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} numThreads, numBlocks;
00196         \hyperlink{particle_system__cuda_8cu_a78e8aa50e0629b57cff219a2fa753ed0}{computeGridSize}(\hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}, 256, numBlocks, numThreads);
00197 
00198         \textcolor{comment}{// set all cells to empty}
00199         checkCudaErrors(cudaMemset(cellStart, 0xffffffff, numCells*\textcolor{keyword}{sizeof}(\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint})));
00200 
00201 \textcolor{preprocessor}{#if USE\_TEX}
00202 \textcolor{preprocessor}{}        checkCudaErrors(cudaBindTexture(0, oldPosTex, oldPos, \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}*\textcolor{keyword}{sizeof}(float4)));
00203         checkCudaErrors(cudaBindTexture(0, oldVelTex, oldVel, \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}*\textcolor{keyword}{sizeof}(float4)));
00204 \textcolor{preprocessor}{#endif}
00205 \textcolor{preprocessor}{}
00206         \hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint} smemSize = \textcolor{keyword}{sizeof}(\hyperlink{particles__kernel_8cuh_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint})*(numThreads+1);
00207         reorderDataAndFindCellStartD<<< numBlocks, numThreads, smemSize>>>(
00208             cellStart,
00209             cellEnd,
00210             (float4 *) sortedPos,
00211             (float4 *) sortedVel,
00212             gridParticleHash,
00213             gridParticleIndex,
00214             (float4 *) oldPos,
00215             (float4 *) oldVel,
00216             \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles});
00217         getLastCudaError(\textcolor{stringliteral}{"Kernel execution failed: reorderDataAndFindCellStartD"});
00218 
00219 \textcolor{preprocessor}{#if USE\_TEX}
00220 \textcolor{preprocessor}{}        checkCudaErrors(cudaUnbindTexture(oldPosTex));
00221         checkCudaErrors(cudaUnbindTexture(oldVelTex));
00222 \textcolor{preprocessor}{#endif}
00223 \textcolor{preprocessor}{}    \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_ac72ccd068434c46c2f901c751d53be1d_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a342176dbaba2668312c45e1a1423fc4e}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!set\-Parameters@{set\-Parameters}}
\index{set\-Parameters@{set\-Parameters}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{set\-Parameters}]{\setlength{\rightskip}{0pt plus 5cm}void set\-Parameters (
\begin{DoxyParamCaption}
\item[{{\bf Sim\-Params} $\ast$}]{host\-Params}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a342176dbaba2668312c45e1a1423fc4e}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00130}{130} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.


\begin{DoxyCode}
00131     \{
00132         \textcolor{comment}{// copy parameters to constant memory}
00133         checkCudaErrors(cudaMemcpyToSymbol(\hyperlink{particles_8cpp_ace10f2fb51e03e3be1ccf7837c9c5c68}{params}, hostParams, \textcolor{keyword}{sizeof}(
      \hyperlink{struct_sim_params}{SimParams})));
00134     \}
\end{DoxyCode}
\hypertarget{particle_system_8cuh_ac71da7e4672a2732a098ba933a799257}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!sort\-Particles@{sort\-Particles}}
\index{sort\-Particles@{sort\-Particles}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{sort\-Particles}]{\setlength{\rightskip}{0pt plus 5cm}void sort\-Particles (
\begin{DoxyParamCaption}
\item[{{\bf uint} $\ast$}]{d\-Grid\-Particle\-Hash, }
\item[{{\bf uint} $\ast$}]{d\-Grid\-Particle\-Index, }
\item[{{\bf uint}}]{num\-Particles}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_ac71da7e4672a2732a098ba933a799257}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00271}{271} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00272     \{
00273         thrust::sort\_by\_key(thrust::device\_ptr<uint>(dGridParticleHash),
00274                             thrust::device\_ptr<uint>(dGridParticleHash + 
      \hyperlink{particles_8cpp_a05b8a90212054a3eb1a036ae0c269596}{numParticles}),
00275                             thrust::device\_ptr<uint>(dGridParticleIndex));
00276     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_ac71da7e4672a2732a098ba933a799257_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_af59f4c114812beed29874c0a1a31519d}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!thread\-Sync@{thread\-Sync}}
\index{thread\-Sync@{thread\-Sync}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{thread\-Sync}]{\setlength{\rightskip}{0pt plus 5cm}void thread\-Sync (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_af59f4c114812beed29874c0a1a31519d}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00078}{78} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.


\begin{DoxyCode}
00079     \{
00080         checkCudaErrors(cudaDeviceSynchronize());
00081     \}
\end{DoxyCode}
\hypertarget{particle_system_8cuh_a98c3325419b7528d34a51ca7972d7095}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!unmap\-G\-L\-Buffer\-Object@{unmap\-G\-L\-Buffer\-Object}}
\index{unmap\-G\-L\-Buffer\-Object@{unmap\-G\-L\-Buffer\-Object}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{unmap\-G\-L\-Buffer\-Object}]{\setlength{\rightskip}{0pt plus 5cm}void unmap\-G\-L\-Buffer\-Object (
\begin{DoxyParamCaption}
\item[{struct cuda\-Graphics\-Resource $\ast$}]{cuda\-\_\-vbo\-\_\-resource}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a98c3325419b7528d34a51ca7972d7095}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00109}{109} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00266}{Particle\-System\-::update()}.


\begin{DoxyCode}
00110     \{
00111         checkCudaErrors(cudaGraphicsUnmapResources(1, &cuda\_vbo\_resource, 0));
00112     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a98c3325419b7528d34a51ca7972d7095_icgraph}
\end{center}
\end{figure}


\hypertarget{particle_system_8cuh_a9afef8c00ca779aae2d7484b45bce34c}{\index{particle\-System.\-cuh@{particle\-System.\-cuh}!unregister\-G\-L\-Buffer\-Object@{unregister\-G\-L\-Buffer\-Object}}
\index{unregister\-G\-L\-Buffer\-Object@{unregister\-G\-L\-Buffer\-Object}!particleSystem.cuh@{particle\-System.\-cuh}}
\subsubsection[{unregister\-G\-L\-Buffer\-Object}]{\setlength{\rightskip}{0pt plus 5cm}void unregister\-G\-L\-Buffer\-Object (
\begin{DoxyParamCaption}
\item[{struct cuda\-Graphics\-Resource $\ast$}]{cuda\-\_\-vbo\-\_\-resource}
\end{DoxyParamCaption}
)}}\label{particle_system_8cuh_a9afef8c00ca779aae2d7484b45bce34c}


Definicja w linii \hyperlink{particle_system__cuda_8cu_source_l00094}{94} pliku \hyperlink{particle_system__cuda_8cu_source}{particle\-System\-\_\-cuda.\-cu}.



Odwołania w \hyperlink{particle_system_8cpp_source_l00233}{Particle\-System\-::\-\_\-finalize()} i \hyperlink{particle_system_8cpp_source_l00403}{Particle\-System\-::set\-Array()}.


\begin{DoxyCode}
00095     \{
00096         checkCudaErrors(cudaGraphicsUnregisterResource(cuda\_vbo\_resource));
00097     \}
\end{DoxyCode}


Oto graf wywoływań tej funkcji\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{particle_system_8cuh_a9afef8c00ca779aae2d7484b45bce34c_icgraph}
\end{center}
\end{figure}


